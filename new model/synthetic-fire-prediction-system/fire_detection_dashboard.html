<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>üî• Fire Detection System Dashboard</title>
    <script src="https://cdn.jsdelivr.net/npm/mermaid@10.0.0/dist/mermaid.min.js"></script>
    <style>
        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            margin: 0;
            padding: 20px;
            background-color: #f5f7fa;
            color: #333;
        }
        .header {
            background: linear-gradient(135deg, #ff416c, #ff4b2b);
            color: white;
            padding: 20px;
            border-radius: 10px;
            text-align: center;
            margin-bottom: 20px;
            box-shadow: 0 4px 6px rgba(0,0,0,0.1);
        }
        .dashboard {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
            gap: 20px;
            margin-bottom: 20px;
        }
        .card {
            background: white;
            border-radius: 10px;
            padding: 20px;
            box-shadow: 0 4px 6px rgba(0,0,0,0.1);
            transition: transform 0.3s ease;
        }
        .card:hover {
            transform: translateY(-5px);
        }
        .card h3 {
            margin-top: 0;
            border-bottom: 2px solid #eee;
            padding-bottom: 10px;
        }
        .status-indicator {
            display: inline-block;
            width: 12px;
            height: 12px;
            border-radius: 50%;
            margin-right: 10px;
        }
        .status-operational {
            background-color: #4CAF50;
        }
        .status-error {
            background-color: #f44336;
        }
        .status-warning {
            background-color: #FF9800;
        }
        .data-flow {
            background: white;
            border-radius: 10px;
            padding: 20px;
            box-shadow: 0 4px 6px rgba(0,0,0,0.1);
            margin-bottom: 20px;
        }
        .instructions {
            background: #e3f2fd;
            border-radius: 10px;
            padding: 20px;
            box-shadow: 0 4px 6px rgba(0,0,0,0.1);
        }
        .file-list {
            max-height: 150px;
            overflow-y: auto;
            font-family: monospace;
            font-size: 0.9em;
            background: #f8f9fa;
            padding: 10px;
            border-radius: 5px;
        }
        .refresh-info {
            text-align: center;
            color: #666;
            font-style: italic;
            margin-top: 20px;
        }
        .alert-levels {
            display: flex;
            justify-content: space-around;
            flex-wrap: wrap;
            gap: 10px;
            margin-top: 15px;
        }
        .alert-level {
            padding: 10px;
            border-radius: 5px;
            text-align: center;
            flex: 1;
            min-width: 100px;
        }
        .emergency { background-color: #ffcdd2; }
        .alert { background-color: #ffe0b2; }
        .warning { background-color: #fff9c4; }
        .info { background-color: #b2dfdb; }
    </style>
</head>
<body>
    <div class="header">
        <h1>üî• Fire Detection System Dashboard</h1>
        <p>Real-time monitoring of end-to-end fire detection system</p>
        <p id="last-updated">Last Updated: <span id="timestamp"></span></p>
    </div>

    <div class="dashboard">
        <div class="card">
            <h3>üì° Device Data Collection</h3>
            <p><span class="status-indicator status-operational"></span> <strong>Status:</strong> ACTIVE</p>
            <p><strong>Devices Deployed:</strong> 1+ Raspberry Pi units</p>
            <p><strong>Sensors:</strong></p>
            <ul>
                <li>MLX90640 Thermal Camera</li>
                <li>Grove Multichannel Gas Sensor v2</li>
            </ul>
            <p><strong>Data Frequency:</strong> Every second/minute</p>
        </div>

        <div class="card">
            <h3>üìÇ S3 Data Ingestion</h3>
            <p><span class="status-indicator status-operational"></span> <strong>Status:</strong> OPERATIONAL</p>
            <p><strong>Bucket:</strong> data-collector-of-first-device</p>
            <p><strong>Total Files:</strong> 20</p>
            <p><strong>Gas Files:</strong> 20</p>
            <p><strong>Thermal Files:</strong> 1</p>
            <p><strong>Recent Files:</strong></p>
            <div class="file-list">
                gas_data_20250909_121004_2.csv<br>
                gas_data_20250909_121002_1.csv<br>
                gas_data_20250909_120959_0.csv<br>
                gas_data_20250909_120908.csv<br>
                gas_data_20250909_120704.csv<br>
                thermal_data_20250909_115554.csv
            </div>
        </div>

        <div class="card">
            <h3>‚öôÔ∏è Lambda Processing</h3>
            <p><span class="status-indicator status-operational"></span> <strong>Status:</strong> OPERATIONAL</p>
            <p><strong>Function:</strong> saafe-s3-data-processor</p>
            <p><strong>Runtime:</strong> Python 3.9</p>
            <p><strong>Memory:</strong> 1024 MB</p>
            <p><strong>Timeout:</strong> 900 seconds</p>
            <p><strong>Last Processed:</strong> thermal_data_20250909_121002_1.csv</p>
        </div>

        <div class="card">
            <h3>üß† SageMaker Inference</h3>
            <p><span class="status-indicator status-operational"></span> <strong>Status:</strong> InService</p>
            <p><strong>Endpoint:</strong> fire-mvp-xgb-endpoint</p>
            <p><strong>Model:</strong> XGBoost Ensemble</p>
            <p><strong>Features:</strong> 18 engineered features</p>
        </div>

        <div class="card">
            <h3>üö® SNS Alerting</h3>
            <p><span class="status-indicator status-warning"></span> <strong>Status:</strong> CONFIGURATION NEEDED</p>
            <p><strong>Topic:</strong> fire-detection-alerts</p>
            <p><strong>Subscriptions:</strong> 0 (needs configuration)</p>
            <p><strong>Alert Levels:</strong></p>
            <div class="alert-levels">
                <div class="alert-level emergency">EMERGENCY<br>(‚â• 0.8)</div>
                <div class="alert-level alert">ALERT<br>(0.6-0.79)</div>
                <div class="alert-level warning">WARNING<br>(0.4-0.59)</div>
                <div class="alert-level info">INFO<br>(&lt; 0.4)</div>
            </div>
        </div>
    </div>

    <div class="data-flow">
        <h2>üìä End-to-End Data Flow</h2>
        <div class="mermaid">
            graph TB
                A[üì° Raspberry Pi Devices] --> B[S3 Bucket<br/>data-collector-of-first-device]
                B --> C[Lambda Function<br/>saafe-s3-data-processor]
                C --> D[SageMaker Endpoint<br/>fire-mvp-xgb-endpoint]
                D --> E[SNS Topic<br/>fire-detection-alerts]
                E --> F[üìß Alert Subscribers]
                
                style A fill:#e1f5fe
                style B fill:#f3e5f5
                style C fill:#e8f5e8
                style D fill:#fff3e0
                style E fill:#ffebee
                style F fill:#f1f8e9
        </div>
    </div>

    <div class="instructions">
        <h2>üìã Next Steps for Full Operation</h2>
        <ol>
            <li><strong>Configure SNS Subscriptions</strong> - Add email or SMS subscribers to receive alerts</li>
            <li><strong>Monitor CloudWatch Logs</strong> - Check processing logs for any issues</li>
            <li><strong>Test End-to-End Flow</strong> - Run the high-frequency processing script to verify complete workflow</li>
            <li><strong>Set Up Automated Monitoring</strong> - Create CloudWatch alarms for system health</li>
        </ol>
        <p><strong>System Status:</strong> ‚úÖ DEVICES DEPLOYED AND SENDING DATA ‚úÖ</p>
        <p>All system components are operational. The high-frequency data processing pipeline is ready for real-time fire detection.</p>
    </div>

    <div class="refresh-info">
        <p>This dashboard shows a snapshot of the system status. For real-time updates, run the Python dashboard script.</p>
    </div>

    <script>
        // Initialize Mermaid
        mermaid.initialize({startOnLoad:true});
        
        // Update timestamp
        function updateTimestamp() {
            const now = new Date();
            document.getElementById('timestamp').textContent = now.toUTCString();
        }
        
        // Update timestamp on load
        updateTimestamp();
        
        // Update timestamp every minute
        setInterval(updateTimestamp, 60000);
    </script>
</body>
</html>